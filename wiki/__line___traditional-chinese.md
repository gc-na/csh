<!--
Meta Description: # __LINE__：C 語言中的行號宏 ## 摘要 `__LINE__` 是 C 語言中的一個預定義宏，用於獲取當前源代碼行的行號，對於調試和錯誤跟蹤非常有用。 ## 文件說明 `__LINE__` 宏在 C 語言中自動定義，無需包含任何額外的標頭文件。它的主要目的是提供當前行號，這對於開發者在編...
Meta Keywords: __line__, include, stdio, int, main
-->

# __LINE__：C 語言中的行號宏

## 摘要
`__LINE__` 是 C 語言中的一個預定義宏，用於獲取當前源代碼行的行號，對於調試和錯誤跟蹤非常有用。

## 文件說明
`__LINE__` 宏在 C 語言中自動定義，無需包含任何額外的標頭文件。它的主要目的是提供當前行號，這對於開發者在編寫日誌、錯誤報告或調試信息時非常有幫助。該宏的值是編譯器在處理源代碼時自動設置的，並且會隨著行的增加而自動更新。

### 用法
在源代碼中，可以直接使用 `__LINE__`。例如：

```c
#include <stdio.h>

int main() {
    printf("This is line number: %d\n", __LINE__);
    return 0;
}
```

在這段代碼中，`__LINE__` 將返回該行的行號。

### 詳細說明
- **自動更新**：每當 `__LINE__` 被引用時，它會返回當前行的行號。這意味著在同一個文件中，隨著對代碼的添加或修改，行號也會自動更新。
- **與其他宏搭配使用**：通常，`__LINE__` 與 `__FILE__`（提供文件名）和 `__DATE__`、`__TIME__`（提供編譯日期和時間）一起使用，以提供更全面的調試信息。
- **範圍**：`__LINE__` 的值在整個文件中保持一致，並不會因為函數或代碼塊的變化而改變。

## 範例
以下是幾個使用 `__LINE__` 的基本範例：

### 範例 1：基本使用
```c
#include <stdio.h>

int main() {
    printf("This is line number: %d\n", __LINE__); // 輸出當前行號
    return 0;
}
```

### 範例 2：與其他宏結合
```c
#include <stdio.h>

void log_error(const char *message) {
    printf("Error: %s at %s:%d\n", message, __FILE__, __LINE__);
}

int main() {
    log_error("An example error occurred");
    return 0;
}
```

在這個例子中，錯誤日誌會顯示具體的錯誤信息以及發生的行號和文件名。

## 解釋
- **常見陷阱**：使用 `__LINE__` 時，開發者需注意它的值在不同的上下文中可能會受到影響，特別是在使用預處理器指令（如 `#ifdef`、`#ifndef` 等）時，可能會導致行號的計算不如預期。
- **多檔案項目**：在大型專案中，當你在多個檔案中使用 `__LINE__` 時，確保使用 `__FILE__` 來指明具體的檔案，這樣可以避免混淆行號來源。

## 一行總結
`__LINE__` 是 C 語言中一個有用的預定義宏，用於獲取當前源代碼行號，幫助開發者進行有效的調試和錯誤跟蹤。