<!--
Meta Description: # fseek: C言語におけるファイルポインタの移動 ## 概要 `fseek`は、C言語においてファイルポインタの位置を指定した位置に移動させるための関数です。この関数は、ファイルの読み書き操作を効率的に行うために使用されます。 ## ドキュメント ### 目的 `fseek`関数は、指定された...
Meta Keywords: fseek, file, int, return, stream
-->

# fseek: C言語におけるファイルポインタの移動

## 概要
`fseek`は、C言語においてファイルポインタの位置を指定した位置に移動させるための関数です。この関数は、ファイルの読み書き操作を効率的に行うために使用されます。

## ドキュメント
### 目的
`fseek`関数は、指定されたファイルストリームにおける読み書き位置を変更するために使用されます。これにより、ファイル内の任意の位置にアクセスすることが可能になります。

### 使用法
`fseek`の基本的な構文は以下の通りです。

```c
int fseek(FILE *stream, long offset, int whence);
```

- **stream**: 操作対象のファイルストリームを指すポインタ。
- **offset**: 新しい位置までのオフセット（バイト数）。
- **whence**: 移動の基準となる位置を指定するための値。以下のいずれかを指定します。
  - `SEEK_SET`: ファイルの先頭からのオフセット。
  - `SEEK_CUR`: 現在のファイルポインタの位置からのオフセット。
  - `SEEK_END`: ファイルの末尾からのオフセット。

### 戻り値
`fseek`は、成功した場合は0を返し、失敗した場合は-1を返します。

## 例
以下に、`fseek`の基本的な使用例を示します。

### 例1: ファイルの先頭からの移動
```c
#include <stdio.h>

int main() {
    FILE *file = fopen("example.txt", "r");
    if (file == NULL) {
        perror("ファイルオープンエラー");
        return 1;
    }

    fseek(file, 0, SEEK_SET); // ファイルの先頭に移動
    // 読み取り操作...
    
    fclose(file);
    return 0;
}
```

### 例2: 現在の位置からの移動
```c
#include <stdio.h>

int main() {
    FILE *file = fopen("example.txt", "r");
    if (file == NULL) {
        perror("ファイルオープンエラー");
        return 1;
    }

    fseek(file, 10, SEEK_CUR); // 現在の位置から10バイト後ろに移動
    // 読み取り操作...
    
    fclose(file);
    return 0;
}
```

## 説明
`fseek`を使用する際の一般的な注意点や落とし穴には以下が含まれます。

- **ファイルモード**: `fseek`は、読み取り専用または書き込み専用で開かれたファイルでのみ機能します。ファイルが正しくオープンされていることを確認してください。
- **オフセットの値**: オフセットがファイルのサイズを超える場合、未定義の動作を引き起こす可能性があります。
- **ストリームの状態**: `fseek`を呼び出す前に、ストリームがエラー状態でないことを確認してください。エラーがある場合、`fseek`は期待通りに動作しないことがあります。

## 1行要約
`fseek`は、C言語においてファイルポインタの位置を効率的に変更するための関数です。