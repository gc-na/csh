<!--
Meta Description: # C 프로그래밍 언어의 atexit 함수: 프로그램 종료 시 사용자 정의 함수 호출하기 ## 개요 `atexit` 함수는 C 프로그래밍 언어에서 프로그램이 종료될 때 특정 함수를 자동으로 호출하는 기능을 제공합니다. 이 기능을 통해 자원 해제 및 정리 작업을 효율적으...
Meta Keywords: atexit, 함수는, 함수를, cleanup, 등록된
-->

# C 프로그래밍 언어의 atexit 함수: 프로그램 종료 시 사용자 정의 함수 호출하기

## 개요
`atexit` 함수는 C 프로그래밍 언어에서 프로그램이 종료될 때 특정 함수를 자동으로 호출하는 기능을 제공합니다. 이 기능을 통해 자원 해제 및 정리 작업을 효율적으로 관리할 수 있습니다.

## 문서화
### 목적
`atexit` 함수는 프로그램 종료 시 호출될 함수를 등록하여, 프로그램이 종료되기 전에 필요한 정리 작업을 수행할 수 있도록 돕습니다. 예를 들어, 동적 메모리 할당 후 메모리 해제를 자동으로 처리하는 데 유용합니다.

### 사용법
`atexit` 함수는 다음과 같은 형식으로 사용됩니다:

```c
#include <stdlib.h>

int atexit(void (*func)(void));
```

- **인자**: `func`는 프로그램 종료 시 호출될 함수의 포인터입니다. 이 함수는 인자를 받지 않으며 반환값도 없어야 합니다.
- **반환값**: 성공적으로 함수가 등록되면 0을 반환하고, 실패 시 비음수 값을 반환합니다.

### 세부사항
- 최대 32개의 종료 핸들러를 등록할 수 있습니다.
- 등록된 함수는 등록된 순서의 역순으로 호출됩니다.
- 프로그램이 정상적으로 종료되거나 `exit` 함수를 호출할 때 등록된 함수가 호출됩니다.
- 비정상 종료(예: 세그멘테이션 오류) 시에는 호출되지 않습니다.

## 예제
다음은 `atexit` 함수를 사용하는 간단한 예제입니다:

```c
#include <stdio.h>
#include <stdlib.h>

void cleanup() {
    printf("Cleanup function called.\n");
}

int main() {
    if (atexit(cleanup) != 0) {
        fprintf(stderr, "Failed to register cleanup function.\n");
        return EXIT_FAILURE;
    }
    
    printf("Main function is running.\n");
    return EXIT_SUCCESS;
}
```

위의 코드에서 `cleanup` 함수는 프로그램이 종료될 때 호출되어 "Cleanup function called."라는 메시지를 출력합니다.

## 설명
- **일반적인 함정**: `atexit`에 등록된 함수는 인자를 받지 않기 때문에, 함수 포인터를 잘못 설정하면 오류가 발생할 수 있습니다.
- **메모리 관리**: 동적 메모리를 할당한 경우, 해당 메모리를 해제하기 위한 함수를 등록하는 것이 중요합니다. 이를 통해 메모리 누수를 방지할 수 있습니다.
- **비정상 종료 처리**: `atexit`에 등록된 함수는 비정상 종료 시 호출되지 않으므로, 이 경우를 대비한 다른 에러 처리 방법이 필요합니다.

## 한 줄 요약
`atexit` 함수는 C 프로그램 종료 시 사용자 정의 함수를 자동으로 호출하여 자원을 정리하는 데 유용한 기능입니다.