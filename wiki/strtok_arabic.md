<!--
Meta Description: # دالة strtok في لغة C: التقطيع الفعال للسلاسل النصية ## ملخص تعتبر دالة `strtok` في لغة C أداة مهمة لتقطيع السلاسل النصية إلى أجزاء (توكنات) بناءً عل...
Meta Keywords: strtok, النصية, السلسلة, null, token
-->

# دالة strtok في لغة C: التقطيع الفعال للسلاسل النصية

## ملخص
تعتبر دالة `strtok` في لغة C أداة مهمة لتقطيع السلاسل النصية إلى أجزاء (توكنات) بناءً على محددات معينة. تُستخدم هذه الدالة بشكل شائع في معالجة النصوص والبيانات.

## الوثائق
### الغرض
تقوم دالة `strtok` بتقسيم سلسلة نصية إلى توكنات، حيث يتم تحديد الفواصل (المحددات) التي تفصل بين هذه التوكنات. تُستخدم هذه الدالة في العديد من تطبيقات البرمجة، مثل تحليل البيانات المدخلة من المستخدم أو قراءة الملفات النصية.

### الاستخدام
تستخدم دالة `strtok` بالشكل التالي:

```c
char *strtok(char *str, const char *delim);
```

- **المعطيات:**
  - `str`: السلسلة النصية التي ترغب في تقطيعها. في الاستدعاء الأول، يجب أن تحتوي على السلسلة النصية. في الاستدعاءات اللاحقة، يجب تمرير قيمة `NULL`.
  - `delim`: سلسلة من المحارف التي تُستخدم كحدود لتحديد نقاط التقطيع.

- **القيمة المعادة:**
  - تُعيد الدالة مؤشرًا إلى أول توكن، أو `NULL` إذا لم يتبقى توكنات.

### تفاصيل
- عند استدعاء `strtok` لأول مرة، يجب تمرير السلسلة النصية كمعطى. في الاستدعاءات التالية، يتم تمرير `NULL` للإشارة إلى أن العملية تستمر على نفس السلسلة.
- يتم استبدال محددات التقطيع في السلسلة النصية بـ `\0` (نهاية السلسلة).
- `strtok` ليست آمنة للاستخدام في بيئات متعددة الخيوط (multi-threaded)، حيث أنها تحتفظ بحالة داخلية.

## أمثلة
### المثال 1: تقسيم سلسلة نصية بسيطة
```c
#include <stdio.h>
#include <string.h>

int main() {
    char str[] = "مرحبا بالعالم";
    char *token = strtok(str, " ");

    while (token != NULL) {
        printf("%s\n", token);
        token = strtok(NULL, " ");
    }

    return 0;
}
```
**النتيجة:**
```
مرحبا
بالعالم
```

### المثال 2: استخدام محددات متعددة
```c
#include <stdio.h>
#include <string.h>

int main() {
    char str[] = "C,Java;Python-Ruby";
    char *token = strtok(str, ",;-");

    while (token != NULL) {
        printf("%s\n", token);
        token = strtok(NULL, ",;-");
    }

    return 0;
}
```
**النتيجة:**
```
C
Java
Python
Ruby
```

## الشرح
### المشكلات الشائعة
- **فقدان البيانات:** إذا تم تمرير سلسلة نصية إلى `strtok`، سيتم تعديلها. تأكد من أن السلسلة النصية قابلة للتعديل.
- **استخدام غير آمن في الخيوط المتعددة:** كما ذكرت سابقًا، `strtok` ليست آمنة في بيئات متعددة الخيوط. استخدم `strtok_r` كبديل في مثل هذه الحالات.
- **عدم التعامل مع السلاسل الفارغة:** إذا كانت السلسلة النصية فارغة، ستعيد `strtok` قيمة `NULL` مباشرة.

## ملخص جملة واحدة
تعتبر دالة `strtok` أداة فعالة في C لتقطيع السلاسل النصية إلى توكنات بناءً على محددات معينة، لكنها تتطلب الحذر في الاستخدام، خصوصًا في البيئات متعددة الخيوط.