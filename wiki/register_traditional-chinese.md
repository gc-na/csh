<!--
Meta Description: # C 語言中的 register 關鍵字：用於變數的存儲類型 ## 摘要 在 C 語言中，`register` 是一個存儲類型修飾符，用於提示編譯器將變數儲存在 CPU 的暫存器中，以提高存取速度。 ## 文檔 ### 目的 `register` 關鍵字的主要目的是提高變數的存取效率。當變數被聲明...
Meta Keywords: register, int, sum, cpu, type
-->

# C 語言中的 register 關鍵字：用於變數的存儲類型

## 摘要
在 C 語言中，`register` 是一個存儲類型修飾符，用於提示編譯器將變數儲存在 CPU 的暫存器中，以提高存取速度。

## 文檔
### 目的
`register` 關鍵字的主要目的是提高變數的存取效率。當變數被聲明為 `register` 時，編譯器將嘗試將其存儲在處理器的暫存器中，而不是主記憶體中。這樣可以加快變數的讀取和寫入速度，特別是在需要頻繁存取的情況下。

### 使用方法
`register` 關鍵字的語法如下：
```c
register type variable_name;
```
其中 `type` 是變數的數據類型（如 `int`、`float` 等），`variable_name` 是變數的名稱。例如：
```c
register int count;
```

### 詳細說明
1. **編譯器的最佳化**: 使用 `register` 並不保證變數一定會被儲存在暫存器中。編譯器會基於其優化算法和當前系統的情況來決定是否真的在暫存器中儲存變數。
   
2. **無法取址**: 對於 `register` 變數，無法使用取址運算符 `&` 來獲取其地址，這是因為暫存器並沒有實際的記憶體地址。嘗試這樣做會導致編譯錯誤。

3. **數量限制**: CPU 的暫存器數量有限，因此不應該將所有變數都聲明為 `register`。通常建議只對那些在循環中頻繁使用的變數使用此修飾符。

4. **與其他存儲類型的關係**: `register` 修飾符可以與其他存儲類型（如 `auto`、`static`）一起使用，但 `register` 變數會被視為自動變數。

## 範例
以下是使用 `register` 關鍵字的基本示例：

```c
#include <stdio.h>

int main() {
    register int i; // 使用 register 修飾符
    int sum = 0;

    for (i = 1; i <= 100; i++) {
        sum += i; // 對 i 的頻繁存取
    }

    printf("1 到 100 的總和是: %d\n", sum);
    return 0;
}
```

## 解釋
- **常見陷阱**: 如果嘗試對 `register` 變數使用取址運算符，將會產生編譯錯誤。例如：
  ```c
  register int a;
  int *p = &a; // 錯誤：無法對 register 變數取址
  ```

- **編譯器選擇**: 即使聲明了 `register`，編譯器可能會選擇忽略這一建議，因為它認為將變數放在暫存器中並不會提高性能。

## 一句總結
`register` 關鍵字在 C 語言中用於提示編譯器優化變數的存儲位置以提高存取速度，但並不保證變數一定會儲存在暫存器中。