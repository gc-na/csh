<!--
Meta Description: # C言語のsprintf関数: 文字列にフォーマットされたデータを出力する方法 ## 概要 `sprintf`は、C言語の標準ライブラリに含まれる関数で、指定したフォーマットに従ってデータを文字列に書き込むために使用されます。これにより、数値や文字列を柔軟に整形し、文字列として保存することができま...
Meta Keywords: sprintf, int, char, str, buffer
-->

# C言語のsprintf関数: 文字列にフォーマットされたデータを出力する方法

## 概要
`sprintf`は、C言語の標準ライブラリに含まれる関数で、指定したフォーマットに従ってデータを文字列に書き込むために使用されます。これにより、数値や文字列を柔軟に整形し、文字列として保存することができます。

## ドキュメンテーション
### 機能
`sprintf`関数は、形式指定子を使用してデータを文字列にフォーマットし、指定されたバッファに出力します。これにより、複数のデータタイプを組み合わせた文字列を作成できます。

### 使用法
```c
int sprintf(char *str, const char *format, ...);
```

- **引数**:
  - `str`: フォーマットされた文字列が書き込まれるバッファへのポインタ。
  - `format`: 書式指定子を含む文字列で、出力の形式を定義します。
  - `...`: フォーマット指定子に対応する追加の引数。

- **戻り値**: 書き込まれた文字数（ヌル終端を含まない）を返します。エラー発生時には負の値が返されます。

### フォーマット指定子の例
- `%d`: 整数（10進数）
- `%f`: 浮動小数点数
- `%s`: 文字列
- `%c`: 文字
- `%x`: 整数（16進数）

## 例
以下は、`sprintf`の基本的な使用例です。

```c
#include <stdio.h>

int main() {
    char buffer[100];
    int age = 25;
    float height = 175.5;

    sprintf(buffer, "年齢: %d歳, 身長: %.1fcm", age, height);
    printf("%s\n", buffer); // 出力: 年齢: 25歳, 身長: 175.5cm

    return 0;
}
```

## 説明
`sprintf`を使用する際の一般的な落とし穴や注意点には以下のものがあります。

1. **バッファオーバーフロー**: `str`のサイズが不十分な場合、書き込まれる文字列がバッファを超えると未定義動作を引き起こす可能性があります。十分なサイズのバッファを確保することが重要です。
   
2. **フォーマット指定の不一致**: フォーマット指定子の数や型と、対応する引数が一致しない場合、プログラムはクラッシュするか、不正な出力を生成する可能性があります。常に引数の型と数を確認してください。

3. **戻り値の確認**: `sprintf`は書き込まれた文字数を返しますが、エラーが発生した場合は負の値を返すため、これをチェックすることも推奨されます。

## 一文要約
`sprintf`は、指定したフォーマットに従ってデータを文字列に整形し、バッファに書き込むための強力なC言語の関数です。