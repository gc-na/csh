<!--
Meta Description: # دالة snprintf في لغة C: دليل شامل ## ملخص تُعتبر دالة `snprintf` واحدة من الدوال الأساسية في لغة C، حيث تُستخدم لتنسيق النصوص وكتابتها إلى مصفوفة من...
Meta Keywords: snprintf, buffer, الأحرف, التي, int
-->

# دالة snprintf في لغة C: دليل شامل

## ملخص
تُعتبر دالة `snprintf` واحدة من الدوال الأساسية في لغة C، حيث تُستخدم لتنسيق النصوص وكتابتها إلى مصفوفة من الأحرف بشكل آمن ومرن.

## توثيق
### الغرض
تقوم دالة `snprintf` بكتابة تنسيق نص إلى مصفوفة من الأحرف، مع ضمان عدم تجاوز الحد الأقصى المسموح به لعدد الأحرف. هذه الدالة مفيدة لتجنب الأخطاء الشائعة المتعلقة بتجاوز حدود المصفوفات.

### الاستخدام
```c
#include <stdio.h>

int snprintf(char *str, size_t size, const char *format, ...);
```

#### المعاملات
- `str`: هو المؤشر إلى مصفوفة الأحرف التي سيتم كتابة النص المنسق فيها.
- `size`: هو الحد الأقصى لعدد الأحرف التي يمكن كتابتها في `str`، بما في ذلك الحرف null (`\0`).
- `format`: هو سلسلة التنسيق التي تحدد كيفية تنسيق البيانات التالية.
- `...`: هي القيم التي سيتم إدراجها في سلسلة التنسيق.

### القيمة المرجعة
ترجع الدالة `snprintf` عدد الأحرف التي تمت كتابتها (باستثناء الحرف null) في حالة كانت عملية الكتابة ناجحة، وإذا كانت السلسلة المنسقة أكبر من `size`، فإنها ترجع العدد الإجمالي للأحرف التي كانت ستكتب لو لم يكن هناك حد.

## أمثلة
### مثال 1: استخدام أساسي
```c
#include <stdio.h>

int main() {
    char buffer[50];
    int num = 42;
    snprintf(buffer, sizeof(buffer), "The answer is %d", num);
    printf("%s\n", buffer); // الناتج: The answer is 42
    return 0;
}
```

### مثال 2: تجاوز الحدود
```c
#include <stdio.h>

int main() {
    char buffer[10];
    int n = snprintf(buffer, sizeof(buffer), "Hello, World!");
    printf("Written characters: %d\n", n); // الناتج: Written characters: 13
    printf("Buffer content: %s\n", buffer); // الناتج: Buffer content: Hello, 
    return 0;
}
```

## الشرح
### الأخطاء الشائعة
- **عدم كفاية الحجم**: إذا كان حجم المصفوفة `str` أصغر من الحجم الفعلي للسلسلة المنسقة، فإن `snprintf` ستقطع النص ولن تكتب الحرف null، مما قد يتسبب في سلوك غير متوقع.
- **عدم استخدام القيمة المرجعة**: من المهم التحقق من القيمة المرجعة لـ `snprintf` لتحديد إذا كانت الكتابة قد تمت بنجاح أو إذا كانت هناك حاجة لزيادة حجم المصفوفة.

### ملاحظات إضافية
- تعتبر `snprintf` وسيلة آمنة للتنسيق مقارنةً بـ `sprintf`، حيث تقلل من مخاطر تجاوز حدود المصفوفات.
- تأكد دائمًا من تخصيص حجم كافٍ للمتغير `str` لاستيعاب النص المنسق والحرف null.

## ملخص بجملة واحدة
دالة `snprintf` في C تُستخدم لتنسيق النصوص وكتابتها إلى مصفوفة من الأحرف بشكل آمن، مع التحكم في حجم البيانات المكتوبة.