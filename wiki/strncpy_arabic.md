<!--
Meta Description: # استخدام الدالة strncpy في لغة C: الدليل الشامل ## ملخص الدالة `strncpy` هي دالة في لغة البرمجة C تُستخدم لنسخ سلسلة نصية (string) إلى أخرى مع تحديد ...
Meta Keywords: dest, السلسلة, strncpy, char, src
-->

# استخدام الدالة strncpy في لغة C: الدليل الشامل

## ملخص
الدالة `strncpy` هي دالة في لغة البرمجة C تُستخدم لنسخ سلسلة نصية (string) إلى أخرى مع تحديد عدد الأحرف التي سيتم نسخها، مما يساعد في تجنب تجاوز حدود الذاكرة.

## الوثائق
### الغرض
تُستخدم `strncpy` لنسخ عدد محدد من الأحرف من سلسلة نصية (source) إلى سلسلة نصية أخرى (destination)، مع إضافة ميزات أمان للحد من تجاوز الذاكرة.

### الاستخدام
تُستخدم الدالة بالشكل التالي:

```c
char *strncpy(char *dest, const char *src, size_t n);
```

#### المعاملات:
- **dest**: مؤشر إلى السلسلة النصية الهدف حيث سيتم نسخ البيانات.
- **src**: مؤشر إلى السلسلة النصية المصدر التي سيتم نسخ الأحرف منها.
- **n**: عدد الأحرف التي سيتم نسخها من السلسلة المصدر.

### تفاصيل
- إذا كانت السلسلة المصدر (`src`) أقصر من `n`، فسيتم ملء بقية السلسلة الهدف (`dest`) بالأحرف الفارغة (`\0`).
- إذا كانت السلسلة المصدر أطول من `n`، فسوف يتم نسخ `n` حرف فقط، ولن يتم إضافة حرف فارغ في نهاية السلسلة الهدف. لذلك، يجب على المبرمج التأكد من إضافة الحرف الفارغ يدويًا إذا كان ذلك مطلوبًا.

## أمثلة
### مثال 1: استخدام أساسي

```c
#include <stdio.h>
#include <string.h>

int main() {
    char src[] = "Hello, World!";
    char dest[20];

    strncpy(dest, src, 5);
    dest[5] = '\0'; // إضافة الحرف الفارغ يدوياً

    printf("السلسلة الهدف: %s\n", dest); // الناتج: Hello
    return 0;
}
```

### مثال 2: نسخ سلسلة أقصر

```c
#include <stdio.h>
#include <string.h>

int main() {
    char src[] = "Hi!";
    char dest[10];

    strncpy(dest, src, 10);

    printf("السلسلة الهدف: %s\n", dest); // الناتج: Hi!
    return 0;
}
```

## الشرح
### الأخطاء الشائعة
1. **عدم إضافة الحرف الفارغ**: إذا كانت السلسلة المصدر أطول من `n`، لن يتم إضافة الحرف الفارغ تلقائيًا، مما قد يؤدي إلى سلاسل نصية غير صحيحة أو تجاوز الذاكرة عند استخدام `dest`.
2. **التأكد من طول السلسلة الهدف**: يجب التأكد من أن السلسلة الهدف (`dest`) تحتوي على مساحة كافية لاستيعاب الأحرف المنسوخة وأي حرف فارغ قد تحتاجه.

### ملاحظات إضافية
- `strncpy` لا تعمل بنفس الطريقة التي تعمل بها الدالة `strcpy`، لذا من المهم فهم كيفية عمل كل منهما.
- يُفضل استخدام `strncat` لإنشاء سلاسل نصية مدمجة بأمان.

## ملخص جملة واحدة
تُستخدم الدالة `strncpy` في لغة C لنسخ عدد محدد من الأحرف من سلسلة نصية إلى أخرى مع مراعاة حدود الذاكرة.