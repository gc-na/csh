<!--
Meta Description: # استخدام الدالة perror في لغة البرمجة C ## ملخص تعد دالة `perror` في لغة البرمجة C أداة هامة تُستخدم لطباعة رسائل الخطأ المتعلقة بالنظام، الأمر الذي ...
Meta Keywords: perror, errno, include, استخدام, ستخدم
-->

# استخدام الدالة perror في لغة البرمجة C

## ملخص
تعد دالة `perror` في لغة البرمجة C أداة هامة تُستخدم لطباعة رسائل الخطأ المتعلقة بالنظام، الأمر الذي يسهل على المبرمجين تشخيص الأخطاء الناتجة عن عمليات النظام مثل الفتح، القراءة، والكتابة.

## التوثيق
### الغرض
تُستخدم دالة `perror` لطباعة رسالة خطأ توضح السبب وراء فشل عملية معينة، مع إضافة نص محدد من قبل المستخدم. تعتمد الدالة على قيمة المتغير `errno` الذي يحفظ كود الخطأ الناتج عن العملية.

### الاستخدام
تأخذ الدالة `perror` كوسيط نصي (سلسلة نصية) يُستخدم كجزء من الرسالة المطبوعة. التركيب العام للدالة هو كالتالي:

```c
#include <stdio.h>
#include <string.h>
#include <errno.h>

void perror(const char *s);
```

### التفاصيل
- **المتغير errno**: هو متغير عالمي يُستخدم لتخزين معلومات الخطأ الناتج عن عمليات النظام. يجب أن يكون قد تم تعيينه قبل استدعاء `perror`.
- **السلسلة النصية**: تُستخدم لتخصيص الرسالة، وإذا كانت فارغة، سيتم طباعة فقط رسالة الخطأ المرتبطة بـ `errno`.

## الأمثلة
### مثال 1: استخدام perror مع فتح ملف
```c
#include <stdio.h>
#include <errno.h>

int main() {
    FILE *file = fopen("nonexistent.txt", "r");
    if (!file) {
        perror("Error opening file");
    }
    return 0;
}
```

### مثال 2: استخدام perror مع دالة malloc
```c
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

int main() {
    int *arr = malloc(1000000000 * sizeof(int));
    if (!arr) {
        perror("Error allocating memory");
    }
    return 0;
}
```

## الشرح
### الأخطاء الشائعة
- **عدم التحقق من errno**: يجب التأكد من أن `errno` قد تم تعيينه قبل استخدام `perror`، وإلا قد تعطي نتائج غير دقيقة.
- **تجاهل السلسلة النصية**: عند عدم توفير نص مخصص، قد تكون الرسالة الناتجة غير مفهومة. من الأفضل دائماً تخصيص نص يوضح المشكلة.

### ملاحظات إضافية
- تأكد من استيراد المكتبات اللازمة (`<stdio.h>` و`<errno.h>`) عند استخدام `perror`.
- يمكن استخدام `strerror(errno)` كبديل للحصول على وصف نصي للخطأ إذا كان ذلك مطلوبًا.

## ملخص بجملة واحدة
تستخدم دالة `perror` في لغة C لطباعة رسائل الأخطاء الناتجة عن عمليات النظام، مما يسهل عملية تصحيح الأخطاء.