<!--
Meta Description: # C言語における「memcpy」関数の完全ガイド ## 概要 `memcpy`は、C言語でメモリブロックをコピーするための標準ライブラリ関数です。この関数は、指定されたバイト数のデータを一つのメモリ領域から別のメモリ領域に効率的にコピーします。 ## ドキュメンテーション ### 目的 `memc...
Meta Keywords: memcpy, dest, src, include, person
-->

# C言語における「memcpy」関数の完全ガイド

## 概要
`memcpy`は、C言語でメモリブロックをコピーするための標準ライブラリ関数です。この関数は、指定されたバイト数のデータを一つのメモリ領域から別のメモリ領域に効率的にコピーします。

## ドキュメンテーション

### 目的
`memcpy`関数は、メモリの特定の位置から別の位置へデータを移動させるために使用されます。これは、配列や構造体のデータを迅速にコピーする際に非常に便利です。

### 使用法
`memcpy`関数の基本的な構文は次のとおりです。

```c
void *memcpy(void *dest, const void *src, size_t n);
```

#### パラメータ
- `dest`：コピー先のメモリアドレスを指すポインタ。
- `src`：コピー元のメモリアドレスを指すポインタ。
- `n`：コピーするバイト数。

### 戻り値
`memcpy`は、コピー先のメモリアドレス（`dest`）を返します。

## 例

### 基本的な使用例
以下は、`memcpy`を使用して配列の内容をコピーする例です。

```c
#include <stdio.h>
#include <string.h>

int main() {
    char src[] = "Hello, World!";
    char dest[20];

    // srcからdestへコピー
    memcpy(dest, src, strlen(src) + 1); // +1はヌル終端を含めるため

    printf("コピーされた文字列: %s\n", dest);
    return 0;
}
```

### 構造体のコピー例
構造体のデータをコピーする場合も、`memcpy`を利用できます。

```c
#include <stdio.h>
#include <string.h>

typedef struct {
    int id;
    char name[20];
} Person;

int main() {
    Person p1 = {1, "Alice"};
    Person p2;

    // p1からp2へコピー
    memcpy(&p2, &p1, sizeof(Person));

    printf("コピーされたID: %d, 名前: %s\n", p2.id, p2.name);
    return 0;
}
```

## 説明
`memcpy`にはいくつかの注意点があります。

1. **重複したメモリ領域**：`memcpy`は、コピー元とコピー先のメモリ領域が重複している場合、未定義の動作を引き起こすことがあります。このような場合には、`memmove`を使用することが推奨されます。

2. **ヌル終端**：文字列をコピーする際には、ヌル終端（`'\0'`）を含めるために、`strlen(src) + 1`のようにバイト数を指定する必要があります。

3. **バッファオーバーフロー**：指定したコピーサイズが、コピー先のバッファサイズを超えないように注意してください。バッファオーバーフローは、プログラムのクラッシュやセキュリティホールの原因となります。

## 一文要約
`memcpy`は、指定されたバイト数のデータを一つのメモリ領域から別の領域に効率的にコピーするC言語の標準ライブラリ関数です。