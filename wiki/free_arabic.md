<!--
Meta Description: # استخدام الدالة "free" في لغة C ## ملخص تُستخدم الدالة "free" في لغة C لتحرير الذاكرة المخصصة ديناميكيًا، مما يساعد على إدارة الموارد بشكل فعّال ويوف...
Meta Keywords: الذاكرة, free, تحرير, ptr, إلى
-->

# استخدام الدالة "free" في لغة C

## ملخص
تُستخدم الدالة "free" في لغة C لتحرير الذاكرة المخصصة ديناميكيًا، مما يساعد على إدارة الموارد بشكل فعّال ويوفر مساحة الذاكرة عند عدم الحاجة إليها.

## الوثائق
### الغرض
تعمل الدالة "free" على تحرير الذاكرة التي تم تخصيصها مسبقًا باستخدام دالة مثل "malloc" أو "calloc" أو "realloc". وتعتبر هذه العملية جزءًا أساسيًا من إدارة الذاكرة في البرامج المكتوبة بلغة C.

### الاستخدام
تُستخدم الدالة "free" كالتالي:
```c
void free(void *ptr);
```
- **المعطيات**: 
  - `ptr`: مؤشر يشير إلى الكتلة من الذاكرة التي ترغب في تحريرها.
  
### التفاصيل 
- يجب أن يكون `ptr` قد تم تخصيصه بواسطة إحدى دوال تخصيص الذاكرة.
- إذا كان `ptr` يساوي `NULL`، فإن الدالة "free" لا تقوم بأي عملية.
- بعد استدعاء "free"، يصبح `ptr` غير صالح للاستخدام، ولا يجب محاولة الوصول إلى الذاكرة التي تم تحريرها.

## أمثلة
### مثال 1: تحرير الذاكرة
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *arr = (int *)malloc(5 * sizeof(int));
    
    if (arr == NULL) {
        fprintf(stderr, "فشل تخصيص الذاكرة\n");
        return 1;
    }
    
    // استخدام المصفوفة
    for (int i = 0; i < 5; i++) {
        arr[i] = i + 1;
    }
    
    // تحرير الذاكرة
    free(arr);
    return 0;
}
```

### مثال 2: محاولة تحرير مؤشر NULL
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int *ptr = NULL;
    
    // تحرير مؤشر NULL
    free(ptr); // لا يحدث شيء، لا يوجد خطأ
    
    return 0;
}
```

## الشرح
### الأخطاء الشائعة
1. **تحرير الذاكرة مرتين**: يؤدي هذا إلى سلوك غير محدد، حيث يتم محاولة تحرير نفس الكتلة من الذاكرة مرتين.
2. **محاولة الوصول إلى الذاكرة بعد تحريرها**: بعد استدعاء "free"، يجب عدم استخدام المؤشر بعد ذلك، لأنه يصبح غير صالح.
3. **تحرير المؤشر الذي لم يتم تخصيصه**: يؤدي هذا أيضًا إلى سلوك غير محدد.

### ملاحظات إضافية
- من الجيد دائمًا تعيين المؤشرات إلى `NULL` بعد تحريرها، مما يساعد على تجنب أخطاء الوصول إلى مؤشرات غير صالحة.

## ملخص بعبارة واحدة
الدالة "free" في لغة C تُستخدم لتحرير الذاكرة المخصصة ديناميكيًا، مما يساهم في إدارة الموارد بكفاءة.