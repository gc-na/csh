<!--
Meta Description: # _Generic في لغة C: دليل شامل لفهم واستخدام هذا المبدأ ## ملخص `_Generic` هو عبارة عن ميزة في لغة C تم تقديمها في معيار C11، وتهدف إلى تسهيل كتابة ال...
Meta Keywords: _generic, int, إلى, نوع, double
-->

# _Generic في لغة C: دليل شامل لفهم واستخدام هذا المبدأ

## ملخص
`_Generic` هو عبارة عن ميزة في لغة C تم تقديمها في معيار C11، وتهدف إلى تسهيل كتابة الشيفرات التي تعتمد على أنواع بيانات مختلفة دون الحاجة إلى تكرار الشيفرة.

## الوثائق
### الغرض
تستخدم `_Generic` لتحديد التعبيرات المتعلقة بأنواع البيانات في وقت التجميع، مما يسمح للمبرمجين بكتابة شيفرات عامة يمكن استخدامها مع أنواع مختلفة دون الحاجة إلى كتابة وظائف متعددة.

### الاستخدام
تكون صيغة `_Generic` كالتالي:
```c
#define _Generic(x, type1: expr1, type2: expr2, ...) \
    ((typeof(x) == type1) ? expr1 : \
    (typeof(x) == type2) ? expr2 : ...)
```
حيث يتم استبدال `x` بقيمة أو تعبير يتم تقييمه، ويقوم النظام بتحديد نوع `x` واختيار التعبير المناسب بناءً على نوع البيانات.

### التفاصيل
- `_Generic` لا يقوم بإنشاء نوع جديد، بل يختار تعبيرًا بناءً على نوع المتغير.
- يُعتبر `_Generic` مفيدًا في كتابة دوال عامة أو استخدام مكتبات تتطلب دعمًا لأنواع متعددة.
- يجب أن يكون `x` من نوع معروف في وقت التجميع.

## الأمثلة
### مثال 1: استخدام `_Generic` مع الأنواع الأساسية
```c
#include <stdio.h>

#define type_of(x) _Generic((x), \
    int: "int", \
    float: "float", \
    double: "double", \
    default: "unknown")

int main() {
    printf("Type of 5: %s\n", type_of(5));         // Output: Type of 5: int
    printf("Type of 5.0: %s\n", type_of(5.0));     // Output: Type of 5.0: double
    printf("Type of 'a': %s\n", type_of('a'));     // Output: Type of 'a': int
    return 0;
}
```

### مثال 2: استخدام `_Generic` مع دوال مخصصة
```c
#include <stdio.h>

#define print_type(x) _Generic((x), \
    int: printf("Integer: %d\n", x), \
    double: printf("Double: %f\n", x), \
    char*: printf("String: %s\n", x))

int main() {
    print_type(10);        // Output: Integer: 10
    print_type(3.14);     // Output: Double: 3.140000
    print_type("Hello");   // Output: String: Hello
    return 0;
}
```

## الشرح
### الأخطاء الشائعة
- استخدام `_Generic` مع أنواع غير معروفة أو غير مدعومة قد يؤدي إلى أخطاء في وقت التجميع.
- عدم توفير تعبير `default` يمكن أن يؤدي إلى عدم التعامل مع بعض الأنواع مما يتسبب في أخطاء.
- يجب أن تكون القيم المستخدمة في `_Generic` متوافقة مع الأنواع المحددة.

### ملاحظات إضافية
- `_Generic` لا يدعم الأنواع المعقدة مثل الهياكل أو المؤشرات بشكل مباشر، ويتطلب معالجات إضافية.
- يعتبر `_Generic` مفيدًا بشكل خاص عند كتابة مكتبات أو دوال تحتاج إلى دعم أنواع متعددة دون تكرار الكود.

## ملخص من جملة واحدة
`_Generic` في لغة C هو وسيلة لاختيار تعبير بناءً على نوع البيانات في وقت التجميع، مما يسهل كتابة شيفرات عامة ومرنة.