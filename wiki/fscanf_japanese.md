<!--
Meta Description: # C言語のfscanf関数: 入力フォーマットの読み取り ## 概要 `fscanf`はC言語における標準ライブラリ関数で、ファイルからフォーマットに従った入力を読み取るために使用されます。データのフォーマットを指定することで、様々な型のデータを一度に読み込むことが可能です。 ## ドキュメンテー...
Meta Keywords: fscanf, file, int, number, decimal
-->

# C言語のfscanf関数: 入力フォーマットの読み取り

## 概要
`fscanf`はC言語における標準ライブラリ関数で、ファイルからフォーマットに従った入力を読み取るために使用されます。データのフォーマットを指定することで、様々な型のデータを一度に読み込むことが可能です。

## ドキュメンテーション

### 機能
`fscanf`関数は、指定されたファイルストリームからデータを読み取り、指定されたフォーマットに従って変数に格納します。主に、テキストファイルから構造化データを読み取る際に利用されます。

### 使用法
`fscanf`の基本的なシンタックスは以下の通りです:

```c
int fscanf(FILE *stream, const char *format, ...);
```

- `stream`: 読み取る対象のファイルポインタ。
- `format`: 読み取るデータのフォーマット指定子。
- `...`: 読み取ったデータを格納するための変数のアドレス。

### 戻り値
`fscanf`は成功した読み取りの数を返します。すべてのデータが正常に読み取れた場合は、指定された変数の数と同じ値を返します。エラーが発生した場合やファイルの終端に達した場合は、異なる値を返します。

## 例

### 基本的な使用例
以下は、`fscanf`を使用して整数と浮動小数点数をファイルから読み取る基本的な例です。

```c
#include <stdio.h>

int main() {
    FILE *file;
    int number;
    float decimal;

    file = fopen("data.txt", "r");
    if (file == NULL) {
        printf("ファイルを開けませんでした。\n");
        return 1;
    }

    fscanf(file, "%d %f", &number, &decimal);
    printf("読み取った値: 整数 = %d, 浮動小数点 = %f\n", number, decimal);

    fclose(file);
    return 0;
}
```

## 説明

### 一般的な落とし穴
- **ファイルポインタのチェック**: `fopen`関数でファイルを開いた後は、ファイルポインタがNULLでないことを確認することが重要です。
- **フォーマットの一致**: 読み取るデータのフォーマット指定子は、ファイル内のデータと一致している必要があります。これが一致しないと、期待した値が読み取れないことがあります。
- **引数の数**: 指定されたフォーマットに基づいて、十分な数の引数を提供することも重要です。これが不足すると、未定義の動作を引き起こす可能性があります。

### 追加の注意事項
- `fscanf`は、バッファオーバーフローやデータ型の不一致のリスクがあるため、使用時には注意が必要です。
- 整数や浮動小数点数の読み取りでは、データの形式に応じたエラーチェックを行うことが推奨されます。

## 一文要約
`fscanf`は、C言語でファイルからフォーマットに基づいてデータを読み取るための関数です。