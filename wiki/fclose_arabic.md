<!--
Meta Description: # fclose في لغة C: دليل شامل ## ملخص تُستخدم الدالة `fclose` في لغة C لإغلاق ملف تم فتحه مسبقاً باستخدام دالة مثل `fopen`. تساعد هذه الدالة في تحرير ا...
Meta Keywords: file, fclose, الدالة, الملف, return
-->

# fclose في لغة C: دليل شامل

## ملخص
تُستخدم الدالة `fclose` في لغة C لإغلاق ملف تم فتحه مسبقاً باستخدام دالة مثل `fopen`. تساعد هذه الدالة في تحرير الموارد المرتبطة بالملف وتضمن حفظ البيانات.

## الوثائق
### الغرض
الدالة `fclose` تُستخدم لإغلاق الملفات المفتوحة وإطلاق الموارد المرتبطة بها. عند الانتهاء من العمل مع الملفات، من الضروري استخدام `fclose` لضمان عدم تسرب الذاكرة وضمان حفظ البيانات.

### الاستخدام
تأخذ الدالة `fclose` مؤشرًا إلى كائن FILE تم فتحه باستخدام دالة `fopen`. يكون شكلها كالتالي:

```c
int fclose(FILE *stream);
```

#### المعاملات:
- `stream`: مؤشر إلى كائن FILE يمثل الملف المفتوح.

#### القيمة المعادة:
- تعيد `fclose` القيمة 0 في حالة النجاح، و EOF (غالبًا -1) في حالة الفشل.

### التفاصيل
عند تنفيذ `fclose`, تقوم الدالة بما يلي:
1. الكتابة التلقائية للبيانات المخزنة في الذاكرة إلى الملف (إذا كان الملف مفتوحًا في وضع الكتابة).
2. تحرير الموارد المرتبطة بالملف، مثل الذاكرة وموارد النظام.
3. التأكد من أن جميع العمليات المرتبطة بالملف قد تم إنهاؤها بشكل صحيح.

## الأمثلة
### مثال 1: إغلاق ملف نصي
```c
#include <stdio.h>

int main() {
    FILE *file = fopen("example.txt", "r");
    if (file == NULL) {
        perror("Error opening file");
        return 1;
    }
    
    // قراءة البيانات من الملف...

    if (fclose(file) != 0) {
        perror("Error closing file");
        return 1;
    }

    return 0;
}
```

### مثال 2: إغلاق ملف بعد الكتابة
```c
#include <stdio.h>

int main() {
    FILE *file = fopen("output.txt", "w");
    if (file == NULL) {
        perror("Error opening file");
        return 1;
    }

    fprintf(file, "Hello, World!\n");

    if (fclose(file) != 0) {
        perror("Error closing file");
        return 1;
    }

    return 0;
}
```

## الشرح
### الأخطاء الشائعة
- **عدم إغلاق الملف**: إذا لم يتم استخدام `fclose`، يمكن أن يؤدي ذلك إلى تسرب الذاكرة وفقدان البيانات.
- **فتح ملفات غير صحيحة**: تأكد من أن الملف مفتوح قبل محاولة إغلاقه. إذا تم تمرير `NULL` أو ملف غير صحيح إلى `fclose`، فسوف ينتج عن ذلك سلوك غير متوقع.
- **عدم التحقق من القيمة المعادة**: من المهم دائمًا التحقق من القيمة المعادة من `fclose` للتأكد من أن العملية تمت بنجاح.

## ملخص جملة واحدة
تُستخدم الدالة `fclose` في C لإغلاق الملفات المفتوحة، مما يساعد في تحرير الموارد وضمان حفظ البيانات.