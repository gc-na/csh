<!--
Meta Description: # C言語のstrftime関数：日時の書式設定を簡単に ## 概要 `strftime`関数は、C言語において日時を指定された形式で文字列に変換するための標準関数です。この関数は、プログラム内で日付や時刻を整形する際に非常に便利です。 ## ドキュメンテーション ### 目的 `strftime`...
Meta Keywords: strftime, str, buffer, include, time
-->

# C言語のstrftime関数：日時の書式設定を簡単に

## 概要
`strftime`関数は、C言語において日時を指定された形式で文字列に変換するための標準関数です。この関数は、プログラム内で日付や時刻を整形する際に非常に便利です。

## ドキュメンテーション

### 目的
`strftime`は、構造体`tm`に格納された日時情報を、指定されたフォーマットに従って文字列として出力するために使用します。

### 使用法
`strftime`の基本的なシンタックスは以下の通りです。

```c
#include <time.h>
size_t strftime(char *str, size_t maxsize, const char *format, const struct tm *tm);
```

#### 引数
- `str`: フォーマットされた日時を格納するための文字列バッファ。
- `maxsize`: `str`バッファの最大サイズ。
- `format`: 日時の書式を指定するフォーマット文字列。
- `tm`: 日時情報を含む`tm`構造体へのポインタ。

#### 戻り値
成功した場合、出力された文字列の長さを返します。失敗した場合は0を返します。

### フォーマット指定子
`strftime`で使用できる主なフォーマット指定子は以下の通りです：
- `%Y`: 年（4桁）
- `%m`: 月（01-12）
- `%d`: 日（01-31）
- `%H`: 時間（00-23）
- `%M`: 分（00-59）
- `%S`: 秒（00-60）
- `%A`: 曜日（フル）
- `%B`: 月名（フル）

## 例

以下は`strftime`の基本的な使用例です。

```c
#include <stdio.h>
#include <time.h>

int main() {
    time_t t = time(NULL);
    struct tm tm = *localtime(&t);
    
    char buffer[80];
    strftime(buffer, sizeof(buffer), "%Y-%m-%d %H:%M:%S", &tm);
    printf("現在の日時: %s\n", buffer);
    
    return 0;
}
```

このプログラムは、現在の日時を「YYYY-MM-DD HH:MM:SS」の形式で表示します。

## 説明

### よくある落とし穴
1. **バッファオーバーフロー**: `str`のサイズが`maxsize`よりも小さい場合、オーバーフローが発生します。必ず十分なサイズを確保してください。
2. **無効なフォーマット指定子**: 誤ったフォーマット指定子を使用すると、期待通りの結果が得られません。使用する際は、指定子の正確さを確認してください。
3. **tm構造体の初期化**: `tm`構造体が正しく初期化されていない場合、予期しない結果が返されることがあります。`localtime`や`gmtime`を使用して適切に初期化してください。

## 一文要約
`strftime`関数は、C言語で日時を指定したフォーマットで文字列に変換するための強力なツールです。