<!--
Meta Description: # C 語言中的 exit 函式：用於程式結束的關鍵指令 ## 簡介 在 C 語言中，`exit` 函式是一個用於終止程式執行的標準庫函式。它可以用來返回一個狀態碼，指示程式的結束狀態，並確保所有已經打開的資源會被正確釋放。 ## 文件說明 ### 目的 `exit` 函式的主要目的是提供一種有效的...
Meta Keywords: exit, include, stdlib, int, 語言中
-->

# C 語言中的 exit 函式：用於程式結束的關鍵指令

## 簡介
在 C 語言中，`exit` 函式是一個用於終止程式執行的標準庫函式。它可以用來返回一個狀態碼，指示程式的結束狀態，並確保所有已經打開的資源會被正確釋放。

## 文件說明
### 目的
`exit` 函式的主要目的是提供一種有效的方法來終止程式，並能夠向作業系統返回一個結束狀態碼，以便應用程式的執行狀態能夠被其他程式或腳本檢查。

### 使用方式
`exit` 函式的原型定義在 `<stdlib.h>` 標頭檔中，使用方法如下：

```c
#include <stdlib.h>

void exit(int status);
```

- **status**: 一個整數值，通常為 0（表示成功）或非 0（表示錯誤或異常狀態）。

### 詳細說明
當 `exit` 函式被調用時，程式的執行會立即停止。`exit` 函式會執行以下步驟：

1. **執行清理程序**：所有註冊的清理程序（透過 `atexit` 註冊）會被依次調用。
2. **關閉檔案流**：所有打開的檔案流會被關閉，並確保資料寫入完成。
3. **返回狀態碼**：將狀態碼返回給作業系統。

程式可以使用 `exit` 在任何位置終止執行，這使得它在處理錯誤或特殊情況下非常有用。

## 示例
以下是使用 `exit` 函式的一些基本示例：

### 示例 1：正常結束程式
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    printf("程式正常結束。\n");
    exit(0); // 返回狀態碼 0，表示成功
}
```

### 示例 2：錯誤處理
```c
#include <stdio.h>
#include <stdlib.h>

int main() {
    int value = -1;
    if (value < 0) {
        printf("發生錯誤，程式結束。\n");
        exit(1); // 返回非零狀態碼，表示錯誤
    }
    return 0;
}
```

## 解釋
在使用 `exit` 函式時，有幾個常見的注意事項：

1. **不再執行後續代碼**：一旦調用 `exit`，後續的程式碼將不會被執行，這可能導致資源未釋放或狀態未更新。
2. **使用狀態碼**：狀態碼的選擇應該明確，0 通常表示成功，而其他值通常表示不同的錯誤類型。
3. **清理程序的執行**：`exit` 會調用所有註冊的清理程序，這意味著在使用 `exit` 時需要確保這些程序能正確釋放資源。

## 一句話總結
在 C 語言中，`exit` 函式用於安全有效地結束程式執行並返回狀態碼，以便作業系統和其他程式可以獲取執行結果。