<!--
Meta Description: # strrchr 函數：C 語言中的字符串查找技巧 ## 簡介 `strrchr` 是 C 語言標準庫中的一個函數，用於在字符串中查找最後一次出現的指定字符。它對於字符串處理和解析特定格式的數據非常有用。 ## 文檔 ### 目的 `strrchr` 函數的主要目的是從一個給定的字符串中尋找最後一...
Meta Keywords: strrchr, str, char, null, include
-->

# strrchr 函數：C 語言中的字符串查找技巧

## 簡介
`strrchr` 是 C 語言標準庫中的一個函數，用於在字符串中查找最後一次出現的指定字符。它對於字符串處理和解析特定格式的數據非常有用。

## 文檔
### 目的
`strrchr` 函數的主要目的是從一個給定的字符串中尋找最後一次出現的特定字符，並返回該字符在字符串中的位置。如果字符不存在，則返回 `NULL`。

### 使用方法
```c
#include <string.h>

char *strrchr(const char *str, int character);
```

- **參數**:
  - `str`: 要搜索的字符串。
  - `character`: 要查找的字符（以整數形式傳遞）。

- **返回值**:
  - 返回指向字符在字符串中最後一次出現位置的指針。如果字符未找到，則返回 `NULL`。

### 詳細描述
`strrchr` 函數會從字符串的末尾開始搜索，直到找到指定的字符或者達到字符串的開頭。這使得它特別適合於需要從尾部檢查字符的場景，例如處理文件擴展名或URL中最後一個斜杠的位置。

## 例子
### 基本用法示例
```c
#include <stdio.h>
#include <string.h>

int main() {
    const char *str = "Hello, World!";
    char *result = strrchr(str, 'o');

    if (result) {
        printf("最後一次出現 'o' 的位置: %ld\n", result - str);
    } else {
        printf("'o' 不在字符串中。\n");
    }
    return 0;
}
```
### 輸出:
```
最後一次出現 'o' 的位置: 8
```

## 解釋
### 常見陷阱
1. **字符未找到**: 使用 `strrchr` 時，如果查找的字符不在字符串內，返回值將為 `NULL`。務必檢查返回值以避免解引用空指針的錯誤。
   
2. **字符類型**: 注意，`character` 參數是以整數形式傳遞的，這是因為 C 語言中字符類型可被提升為整數。確保傳遞的字符是正確的。

3. **字符串結尾**: `strrchr` 函數會把字符串的終止字符 `\0` 也視作字符的一部分。這意味著如果查找的字符是 `\0`，則會返回指向字符串末尾的指針。

4. **不變性**: `strrchr` 函數不會修改原始字符串，它僅僅返回一個指向字符的位置。

## 一句摘要
`strrchr` 是 C 語言中用於從字符串尾部查找最後一次出現的特定字符的函數。