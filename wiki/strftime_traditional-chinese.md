<!--
Meta Description: # C 語言中的 strftime 函數：格式化時間與日期的利器 ## 概要 `strftime` 函數是 C 語言標準庫中的一個重要功能，用於格式化時間和日期。它提供了一種靈活的方式來表示時間，讓開發者可以根據需求自定義輸出格式。 ## 文檔 ### 目的 `strftime` 函數的主要目的是將...
Meta Keywords: strftime, char, const, buffer, time
-->

# C 語言中的 strftime 函數：格式化時間與日期的利器

## 概要
`strftime` 函數是 C 語言標準庫中的一個重要功能，用於格式化時間和日期。它提供了一種靈活的方式來表示時間，讓開發者可以根據需求自定義輸出格式。

## 文檔
### 目的
`strftime` 函數的主要目的是將時間和日期轉換為指定格式的字符串，幫助開發者以易讀的方式展示時間信息。

### 使用方法
`strftime` 函數的原型定義在 `<time.h>` 標頭檔中，語法如下：

```c
size_t strftime(char *s, size_t max, const char *format, const struct tm *tm);
```

#### 參數說明
- `char *s`：指向要存放格式化結果的字符陣列。
- `size_t max`：字符陣列的最大長度。
- `const char *format`：格式化字符串，包含時間和日期的格式標記。
- `const struct tm *tm`：指向 `tm` 結構的指標，該結構包含了要格式化的時間信息。

#### 返回值
成功時，`strftime` 會返回寫入字符陣列的字符數；如果無法寫入，則返回 0。

### 詳細格式化標記
`format` 字符串可以包含以下格式標記：
- `%Y`：四位數年份（例如：2023）
- `%m`：兩位數月份（01-12）
- `%d`：兩位數日期（01-31）
- `%H`：24小時制的兩位數小時（00-23）
- `%M`：兩位數分鐘（00-59）
- `%S`：兩位數秒（00-59）
- `%A`：完整星期名稱（例如：星期一）
- `%B`：完整月份名稱（例如：一月）

還有更多格式標記可供使用，具體可參閱 C 語言標準庫文檔。

## 示例
以下是使用 `strftime` 函數的基本示例：

```c
#include <stdio.h>
#include <time.h>

int main() {
    time_t now = time(NULL);
    struct tm *tm_info = localtime(&now);
    char buffer[80];

    strftime(buffer, sizeof(buffer), "%Y-%m-%d %H:%M:%S", tm_info);
    printf("當前時間: %s\n", buffer);

    return 0;
}
```

### 輸出
```
當前時間: 2023-10-03 14:25:30
```

## 解釋
### 常見陷阱
1. **緩衝區大小**：確保字符陣列的大小足夠容納格式化後的字符串，包括結尾的空字符。如果緩衝區過小，可能導致未定義行為。
   
2. **格式標記錯誤**：使用不正確的格式標記可能會導致輸出不如預期。建議參考官方文檔確認格式標記的正確性。

3. **時區問題**：`localtime` 函數依賴系統當前時區設定，確保系統時區正確以獲得準確的時間信息。

## 一句總結
`strftime` 函數是 C 語言中用於格式化時間和日期的強大工具，允許開發者以靈活的方式自定義時間輸出格式。