<!--
Meta Description: # C 語言中的 __FILE__ 宏：檔案名稱獲取的利器 ## 概要 在 C 語言中，`__FILE__` 是一個預處理器宏，用於在程式中獲取當前編譯的源檔案名稱。此宏在除錯和日誌記錄等場景中十分有用，因為它能夠幫助開發者清楚地了解錯誤來源。 ## 文件說明 `__FILE__` 是 C 語言中的...
Meta Keywords: __file__, include, stdio, int, main
-->

# C 語言中的 __FILE__ 宏：檔案名稱獲取的利器

## 概要
在 C 語言中，`__FILE__` 是一個預處理器宏，用於在程式中獲取當前編譯的源檔案名稱。此宏在除錯和日誌記錄等場景中十分有用，因為它能夠幫助開發者清楚地了解錯誤來源。

## 文件說明
`__FILE__` 是 C 語言中的一個內建預處理器宏，當編譯器處理源碼時，它會被替換為當前源檔案的完整路徑或檔案名稱。這個宏主要用於增強程式的可讀性和可維護性，特別是在程式調試過程中。

### 用途
- 獲取當前源檔案的名稱，以便在錯誤或日誌輸出中提供更多上下文。
- 在多檔案專案中，有助於追蹤和識別錯誤發生的檔案。

### 使用方法
`__FILE__` 的使用非常簡單，無需任何參數，以下是一個基本的範例：
```c
#include <stdio.h>

int main() {
    printf("當前檔案名稱是：%s\n", __FILE__);
    return 0;
}
```

## 示例
以下是幾個使用 `__FILE__` 的範例，以展示其在不同情境下的應用：

### 範例 1：基本使用
```c
#include <stdio.h>

int main() {
    printf("這段程式碼位於檔案：%s\n", __FILE__);
    return 0;
}
```
輸出：
```
這段程式碼位於檔案：example.c
```

### 範例 2：錯誤日誌
```c
#include <stdio.h>

void log_error(const char* msg) {
    printf("錯誤：%s，發生在檔案：%s\n", msg, __FILE__);
}

int main() {
    log_error("無效的輸入");
    return 0;
}
```
輸出：
```
錯誤：無效的輸入，發生在檔案：example.c
```

## 解釋
使用 `__FILE__` 時，開發者應注意以下幾點：
- **路徑格式**：在某些編譯器中，`__FILE__` 可能返回完整的檔案路徑，而在其他情況下則僅返回檔案名稱。這取決於編譯器的實現。
- **多檔案專案**：在大型專案中，使用 `__FILE__` 可以幫助快速定位問題，但應確保代碼的可讀性，不要過度依賴它。
- **預處理器宏**：`__FILE__` 只有在編譯階段有效，對於運行時的檔案操作無法提供幫助。

## 總結
`__FILE__` 宏在 C 語言中是一個簡便而強大的工具，能夠有效地獲取當前檔案的名稱，對於除錯和日誌記錄具有重要意義。