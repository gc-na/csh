<!--
Meta Description: # C言語のfwrite関数：ファイル書き込みの基本 ## 概要 `fwrite`関数は、C言語においてバイナリデータをファイルに書き込むための標準ライブラリ関数です。この関数は、データのブロックを指定したファイルストリームに書き込むことを可能にします。 ## ドキュメント ### 目的 `fwri...
Meta Keywords: fwrite, file, size_t, int, numbers
-->

# C言語のfwrite関数：ファイル書き込みの基本

## 概要
`fwrite`関数は、C言語においてバイナリデータをファイルに書き込むための標準ライブラリ関数です。この関数は、データのブロックを指定したファイルストリームに書き込むことを可能にします。

## ドキュメント
### 目的
`fwrite`は、メモリ内のデータを指定したファイルに効率的に書き込むために使用されます。これは、特にバイナリファイルの処理や、大量のデータを一度に書き込む際に役立ちます。

### 使用法
`fwrite`の基本的な構文は以下の通りです：

```c
size_t fwrite(const void *ptr, size_t size, size_t count, FILE *stream);
```

- `ptr`: 書き込むデータのポインタ。
- `size`: 各データ項目のサイズ（バイト単位）。
- `count`: 書き込むデータ項目の数。
- `stream`: 書き込むファイルストリームへのポインタ。

### 戻り値
`fwrite`は成功した場合、実際に書き込まれたデータ項目の数を返します。エラーが発生した場合は、0が返されます。

## 例
以下は、`fwrite`を使用して整数配列を書き込む基本的な例です。

```c
#include <stdio.h>

int main() {
    FILE *file;
    int numbers[] = {1, 2, 3, 4, 5};
    
    file = fopen("output.bin", "wb"); // バイナリモードでファイルをオープン
    if (file != NULL) {
        fwrite(numbers, sizeof(int), 5, file); // 整数配列を書き込む
        fclose(file); // ファイルを閉じる
    } else {
        printf("ファイルを開けませんでした。\n");
    }
    
    return 0;
}
```

この例では、整数の配列`numbers`を「output.bin」というバイナリファイルに書き込んでいます。

## 説明
`fwrite`を使用する際の一般的な落とし穴や注意点には以下のようなものがあります：

1. **ファイルモードの確認**: `fwrite`を使用する前に、ファイルが正しくオープンされていることを確認してください。読み込み専用（"r"）モードのファイルに書き込むと、エラーが発生します。
   
2. **データの整合性**: バイナリデータを書き込む際、データのサイズが正しいことを確認してください。サイズを間違えると、ファイルの内容が不正になる可能性があります。

3. **エラーチェック**: `fwrite`の戻り値を確認することで、書き込みが成功したかどうかを判断できます。エラーが発生した場合は、`ferror`関数を使用して詳細なエラー情報を取得できます。

## 一行概要
`fwrite`関数は、C言語においてバイナリデータを効率的にファイルに書き込むための関数です。