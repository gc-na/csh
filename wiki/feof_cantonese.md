<!--
Meta Description: # feof 函數在 C 語言中的用法 ## 簡介 `feof` 是 C 語言中的一個標準庫函數，用於檢查檔案流是否達到檔案結尾（EOF）。這個函數在處理檔案輸入時非常有用，特別是在循環讀取資料的情況下。 ## 文件說明 ### 目的 `feof` 函數的主要目的是檢查一個指定的檔案流是否已經讀取到...
Meta Keywords: feof, file, eof, int, stream
-->

# feof 函數在 C 語言中的用法

## 簡介
`feof` 是 C 語言中的一個標準庫函數，用於檢查檔案流是否達到檔案結尾（EOF）。這個函數在處理檔案輸入時非常有用，特別是在循環讀取資料的情況下。

## 文件說明
### 目的
`feof` 函數的主要目的是檢查一個指定的檔案流是否已經讀取到檔案的結尾。當讀取操作到達檔案的尾部時，`feof` 會返回一個非零值，否則返回 0。

### 語法
```c
int feof(FILE *stream);
```

### 參數
- `stream`: 指向 FILE 結構的指標，這是要檢查的檔案流。

### 返回值
- 返回非零值（通常是 1），表示已到達檔案結尾。
- 返回 0，表示尚未到達檔案結尾或出現錯誤。

## 例子
以下是使用 `feof` 函數的基本範例：

```c
#include <stdio.h>

int main() {
    FILE *file;
    char ch;

    file = fopen("example.txt", "r");
    if (file == NULL) {
        perror("無法打開檔案");
        return -1;
    }

    while ((ch = fgetc(file)) != EOF) {
        putchar(ch);
    }

    if (feof(file)) {
        printf("\n已到達檔案結尾。\n");
    }

    fclose(file);
    return 0;
}
```

在這個範例中，我們打開了一個檔案並逐字元讀取內容。當讀取完成後，使用 `feof` 檢查是否已到達檔案結尾。

## 解釋
### 常見陷阱
1. **未檢查檔案是否成功打開**：在使用 `feof` 之前，確保檔案已成功打開，否則可能會導致未定義行為。
2. **在讀取時使用 `feof`**：應在讀取操作之後檢查 `feof`，因為它僅在讀取操作後才會更新狀態。
3. **混淆 `feof` 和 `ferror`**：`feof` 檢查是否到達檔案結尾，而 `ferror` 檢查檔案讀取過程中是否發生錯誤。兩者不應混淆使用。

## 總結
`feof` 是 C 語言中一個重要的檔案處理函數，提供了一種簡單的方式來檢查檔案流是否已到達結尾，幫助開發者有效地管理檔案讀取過程。