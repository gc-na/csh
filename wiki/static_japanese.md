<!--
Meta Description: # C言語における「static」の徹底解説 ## 概要 C言語における「static」は、変数や関数のスコープとライフタイムを制御するための修飾子です。このキーワードを使用することで、変数の可視性と保持される状態を明確に指定できます。 ## ドキュメンテーション 「static」キーワードは、主に...
Meta Keywords: static, count, counterfunction, c言語における, void
-->

# C言語における「static」の徹底解説

## 概要
C言語における「static」は、変数や関数のスコープとライフタイムを制御するための修飾子です。このキーワードを使用することで、変数の可視性と保持される状態を明確に指定できます。

## ドキュメンテーション
「static」キーワードは、主に以下の二つの場面で使用されます。

1. **静的変数**: 関数内で宣言された変数に「static」を付けることで、その変数は関数が呼び出されるたびに初期化されず、プログラムの実行中はその値を保持します。この場合、変数のスコープは関数内に限定されますが、ライフタイムはプログラムの終了まで続きます。

   ```c
   void function() {
       static int count = 0; // 初回呼び出し時にのみ初期化される
       count++;
       printf("%d\n", count);
   }
   ```

2. **静的関数**: ファイル内で宣言された関数に「static」を付けることにより、その関数の可視性をそのファイル内に制限します。他のファイルからはこの関数にアクセスできなくなります。

   ```c
   static void helperFunction() {
       // この関数は同じファイル内でのみアクセス可能
   }
   ```

## 例
以下に「static」の基本的な使用例を示します。

```c
#include <stdio.h>

void counterFunction() {
    static int count = 0; // 静的変数の宣言
    count++;
    printf("Count: %d\n", count);
}

int main() {
    counterFunction(); // 出力: Count: 1
    counterFunction(); // 出力: Count: 2
    counterFunction(); // 出力: Count: 3
    return 0;
}
```

この例では、`count` 変数は `counterFunction` が呼び出されるたびに値を保持し続けます。

## 説明
「static」を使う際の一般的な注意点や落とし穴について説明します。

- **初期化のタイミング**: `static` 修飾子を使用した変数は、プログラムの開始時に一度だけ初期化されます。これは、関数が何度も呼び出される場合に意図しない動作を引き起こす可能性があります。
  
- **スコープの理解**: 静的変数は関数内でのみアクセス可能ですが、ライフタイムはプログラム全体にわたります。一方、静的関数は定義されたファイル内でのみアクセス可能です。

- **グローバルな静的変数**: グローバル変数に `static` を付けると、その変数のスコープがファイル内に制限され、他のファイルからはアクセスできなくなります。

## 一文の要約
C言語における「static」は、変数や関数のスコープとライフタイムを制御し、プログラムの動作を明確にするための重要な修飾子です。