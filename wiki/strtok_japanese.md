<!--
Meta Description: # C言語のstrtok関数：文字列をトークンに分割する方法 ## 概要 C言語における`strtok`関数は、文字列を指定した区切り文字で分割し、トークン（部分文字列）を取得するために使用されます。この関数は、文字列処理において非常に便利であり、特にデータ解析や入力処理で広く利用されています。 #...
Meta Keywords: strtok, char, delim, token, str
-->

# C言語のstrtok関数：文字列をトークンに分割する方法

## 概要
C言語における`strtok`関数は、文字列を指定した区切り文字で分割し、トークン（部分文字列）を取得するために使用されます。この関数は、文字列処理において非常に便利であり、特にデータ解析や入力処理で広く利用されています。

## ドキュメンテーション
### 目的
`strtok`関数は、文字列をトークンに分割するための標準ライブラリ関数です。指定した区切り文字を基に、一連のトークンを抽出します。

### 使用法
`strtok`の関数プロトタイプは以下の通りです。

```c
char *strtok(char *str, const char *delim);
```

- **引数**
  - `str`: 分割する元の文字列。最初の呼び出し時にはこの引数に文字列を指定し、その後の呼び出しでは`NULL`を指定します。
  - `delim`: トークンを分割するための区切り文字列です。

- **戻り値**
  - トークンが見つかった場合は、そのポインタを返します。トークンが存在しない場合は、`NULL`を返します。

### 詳細
`strtok`は、元の文字列を直接変更し、区切り文字を`\0`に置き換えます。そのため、元の文字列はトークン化後に利用できなくなります。`strtok`はスレッドセーフではないため、同時に複数のスレッドで使用する場合は注意が必要です。

## 例
以下に`strtok`の基本的な使い方の例を示します。

```c
#include <stdio.h>
#include <string.h>

int main() {
    char str[] = "C言語,プログラミング,トークン分割";
    const char delim[] = ",";
    char *token;

    // 最初のトークンを取得
    token = strtok(str, delim);
    while (token != NULL) {
        printf("%s\n", token);
        // 次のトークンを取得
        token = strtok(NULL, delim);
    }

    return 0;
}
```

このプログラムは、カンマで区切られた文字列をトークンに分割し、それぞれのトークンを表示します。

## 説明
`strtok`を使用する際の一般的な注意点として、以下の点が挙げられます。

- **元の文字列の変更**: `strtok`は元の文字列を変更するため、元のデータが必要な場合は、事前にコピーを作成することをお勧めします。
- **連続する区切り文字**: 連続した区切り文字が存在する場合、空のトークンが生成されません。これは、予期しない動作を引き起こす可能性があります。
- **スレッドセーフではない**: `strtok`はグローバルな状態を持つため、スレッド環境での使用には`strtok_r`の利用を検討してください。

## 一文要約
C言語の`strtok`関数は、指定した区切り文字で文字列をトークンに分割するための標準ライブラリ関数です。