<!--
Meta Description: # C言語におけるstrncpy関数の完全ガイド ## 概要 `strncpy`関数は、C言語において文字列を指定した長さだけコピーするための標準ライブラリ関数です。この関数は、バッファオーバーフローを防ぐために使用され、特に安全な文字列操作を行う際に重要です。 ## ドキュメント ### 機能 `...
Meta Keywords: strncpy, dest, char, string, src
-->

# C言語におけるstrncpy関数の完全ガイド

## 概要
`strncpy`関数は、C言語において文字列を指定した長さだけコピーするための標準ライブラリ関数です。この関数は、バッファオーバーフローを防ぐために使用され、特に安全な文字列操作を行う際に重要です。

## ドキュメント
### 機能
`strncpy`は、ソース文字列から指定された数の文字をデスティネーションにコピーします。もしソース文字列が指定された数よりも短い場合、デスティネーションに残りの部分をヌル文字（`'\0'`）で埋めます。

### 使用法
```c
#include <string.h>

char *strncpy(char *dest, const char *src, size_t n);
```

- **引数**:
  - `dest`: コピー先の文字列のポインタ。
  - `src`: コピー元の文字列のポインタ。
  - `n`: コピーする最大文字数。

- **戻り値**: `dest`へのポインタ。

### 詳細
`strncpy`は、バッファサイズを考慮した安全な文字列操作を提供しますが、注意が必要です。コピーした後、デスティネーションがヌル終端されていない場合があります。これにより、文字列操作で予期しない動作を引き起こす可能性があります。

## 例
以下に`strncpy`の基本的な使用例を示します。

```c
#include <stdio.h>
#include <string.h>

int main() {
    char src[] = "Hello, World!";
    char dest[20];

    // 5文字をdestにコピー
    strncpy(dest, src, 5);
    // destの内容をヌル終端
    dest[5] = '\0';

    printf("Copied string: %s\n", dest); // 出力: Copied string: Hello

    return 0;
}
```

## 説明
`strncpy`を使用する際の一般的な落とし穴には、以下の点が挙げられます。

1. **ヌル終端の欠如**: コピーする文字数が`n`で、ソース文字列がそれより短い場合、デスティネーションはヌル終端されないため、手動でヌルを追加する必要があります。
2. **バッファサイズ**: デスティネーションのサイズが、コピーする文字数よりも小さい場合、未定義動作を引き起こす可能性があります。常に十分なサイズを確保するようにしましょう。
3. **パフォーマンス**: `strncpy`は、コピーする文字数が多いとパフォーマンスに影響を与える場合があるため、必要な場合のみ使用することが推奨されます。

## 一文要約
`strncpy`は、C言語における安全な文字列コピーを可能にする関数であり、コピー先のバッファサイズを考慮した操作が求められます。